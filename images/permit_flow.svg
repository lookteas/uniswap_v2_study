<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <!-- æ¸å˜èƒŒæ™¯ -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    <!-- ç®­å¤´æ ‡è®° -->
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4fc3f7"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#81c784"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ffb74d"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ba68c8"/>
    </marker>
    <!-- å‘å…‰æ•ˆæœ -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- èƒŒæ™¯ -->
  <rect width="1200" height="800" fill="url(#bgGradient)"/>
  
  <!-- æ ‡é¢˜ -->
  <text x="600" y="45" text-anchor="middle" fill="#ffffff" font-size="28" font-weight="bold" font-family="Arial, sans-serif">
    EIP-2612 Permit æ—  Gas æˆæƒæµç¨‹å›¾
  </text>
  <text x="600" y="75" text-anchor="middle" fill="#888888" font-size="14" font-family="Arial, sans-serif">
    UniswapV2ERC20.sol - ç¦»çº¿ç­¾åæˆæƒæœºåˆ¶
  </text>

  <!-- ==================== è§’è‰²åŒºåŸŸ ==================== -->
  
  <!-- ç”¨æˆ· (Alice) -->
  <g transform="translate(100, 150)">
    <rect x="0" y="0" width="200" height="280" rx="15" fill="#2d3748" stroke="#4fc3f7" stroke-width="2"/>
    <text x="100" y="35" text-anchor="middle" fill="#4fc3f7" font-size="18" font-weight="bold">ğŸ‘¤ ç”¨æˆ· (Alice)</text>
    <text x="100" y="55" text-anchor="middle" fill="#888888" font-size="12">Token Owner</text>
    <line x1="20" y1="70" x2="180" y2="70" stroke="#4fc3f7" stroke-width="1" opacity="0.3"/>
    
    <!-- æ­¥éª¤1 -->
    <rect x="15" y="85" width="170" height="80" rx="8" fill="#1e3a5f" stroke="#4fc3f7" stroke-width="1"/>
    <text x="100" y="105" text-anchor="middle" fill="#4fc3f7" font-size="11" font-weight="bold">â‘  æ„é€ ç­¾åæ¶ˆæ¯</text>
    <text x="100" y="125" text-anchor="middle" fill="#e0e0e0" font-size="10">owner: 0xAlice...</text>
    <text x="100" y="140" text-anchor="middle" fill="#e0e0e0" font-size="10">spender: 0xRouter...</text>
    <text x="100" y="155" text-anchor="middle" fill="#e0e0e0" font-size="10">value: 1000, deadline: ...</text>
    
    <!-- æ­¥éª¤2 -->
    <rect x="15" y="175" width="170" height="90" rx="8" fill="#1e3a5f" stroke="#4fc3f7" stroke-width="1"/>
    <text x="100" y="195" text-anchor="middle" fill="#4fc3f7" font-size="11" font-weight="bold">â‘¡ ç§é’¥ç­¾å (ç¦»çº¿)</text>
    <text x="100" y="215" text-anchor="middle" fill="#ffb74d" font-size="10">ğŸ” ç”¨ç§é’¥å¯¹ digest ç­¾å</text>
    <text x="100" y="235" text-anchor="middle" fill="#81c784" font-size="10">ç”Ÿæˆ: v, r, s</text>
    <text x="100" y="255" text-anchor="middle" fill="#888888" font-size="9">âš¡ æ— éœ€ Gasï¼Œæ— éœ€ ETH</text>
  </g>

  <!-- ä¸­ç»§è€…/DApp -->
  <g transform="translate(500, 150)">
    <rect x="0" y="0" width="200" height="280" rx="15" fill="#2d3748" stroke="#ffb74d" stroke-width="2"/>
    <text x="100" y="35" text-anchor="middle" fill="#ffb74d" font-size="18" font-weight="bold">ğŸ”„ ä¸­ç»§è€…/DApp</text>
    <text x="100" y="55" text-anchor="middle" fill="#888888" font-size="12">Relayer / Frontend</text>
    <line x1="20" y1="70" x2="180" y2="70" stroke="#ffb74d" stroke-width="1" opacity="0.3"/>
    
    <!-- æ­¥éª¤3 -->
    <rect x="15" y="85" width="170" height="80" rx="8" fill="#3d2e1f" stroke="#ffb74d" stroke-width="1"/>
    <text x="100" y="105" text-anchor="middle" fill="#ffb74d" font-size="11" font-weight="bold">â‘¢ æ¥æ”¶ç­¾åæ•°æ®</text>
    <text x="100" y="125" text-anchor="middle" fill="#e0e0e0" font-size="10">æ”¶åˆ°: owner, spender,</text>
    <text x="100" y="140" text-anchor="middle" fill="#e0e0e0" font-size="10">value, deadline,</text>
    <text x="100" y="155" text-anchor="middle" fill="#81c784" font-size="10">v, r, s (ç­¾å)</text>
    
    <!-- æ­¥éª¤4 -->
    <rect x="15" y="175" width="170" height="90" rx="8" fill="#3d2e1f" stroke="#ffb74d" stroke-width="1"/>
    <text x="100" y="195" text-anchor="middle" fill="#ffb74d" font-size="11" font-weight="bold">â‘£ è°ƒç”¨ permit()</text>
    <text x="100" y="215" text-anchor="middle" fill="#e0e0e0" font-size="10">å‘èµ·é“¾ä¸Šäº¤æ˜“</text>
    <text x="100" y="235" text-anchor="middle" fill="#ff8a65" font-size="10">ğŸ’° ä¸­ç»§è€…æ”¯ä»˜ Gas</text>
    <text x="100" y="255" text-anchor="middle" fill="#888888" font-size="9">ç”¨æˆ·æ— éœ€æŒæœ‰ ETH</text>
  </g>

  <!-- æ™ºèƒ½åˆçº¦ -->
  <g transform="translate(900, 150)">
    <rect x="0" y="0" width="200" height="280" rx="15" fill="#2d3748" stroke="#81c784" stroke-width="2"/>
    <text x="100" y="35" text-anchor="middle" fill="#81c784" font-size="18" font-weight="bold">ğŸ“œ æ™ºèƒ½åˆçº¦</text>
    <text x="100" y="55" text-anchor="middle" fill="#888888" font-size="12">UniswapV2ERC20</text>
    <line x1="20" y1="70" x2="180" y2="70" stroke="#81c784" stroke-width="1" opacity="0.3"/>
    
    <!-- æ­¥éª¤5 -->
    <rect x="15" y="85" width="170" height="80" rx="8" fill="#1f3d2e" stroke="#81c784" stroke-width="1"/>
    <text x="100" y="105" text-anchor="middle" fill="#81c784" font-size="11" font-weight="bold">â‘¤ éªŒè¯ç­¾å</text>
    <text x="100" y="125" text-anchor="middle" fill="#e0e0e0" font-size="10">1. æ£€æŸ¥ deadline</text>
    <text x="100" y="140" text-anchor="middle" fill="#e0e0e0" font-size="10">2. é‡å»º digest</text>
    <text x="100" y="155" text-anchor="middle" fill="#e0e0e0" font-size="10">3. ecrecover éªŒè¯</text>
    
    <!-- æ­¥éª¤6 -->
    <rect x="15" y="175" width="170" height="90" rx="8" fill="#1f3d2e" stroke="#81c784" stroke-width="1"/>
    <text x="100" y="195" text-anchor="middle" fill="#81c784" font-size="11" font-weight="bold">â‘¥ æ‰§è¡Œæˆæƒ</text>
    <text x="100" y="215" text-anchor="middle" fill="#e0e0e0" font-size="10">nonces[owner]++</text>
    <text x="100" y="235" text-anchor="middle" fill="#e0e0e0" font-size="10">_approve(owner,</text>
    <text x="100" y="250" text-anchor="middle" fill="#e0e0e0" font-size="10">spender, value)</text>
  </g>

  <!-- ==================== æ•°æ®æµç®­å¤´ ==================== -->
  
  <!-- ç®­å¤´1: ç”¨æˆ· -> ä¸­ç»§è€… (ç­¾åæ•°æ®) -->
  <path d="M 300 290 Q 400 290 500 290" fill="none" stroke="#4fc3f7" stroke-width="3" marker-end="url(#arrowBlue)" filter="url(#glow)"/>
  <rect x="340" y="255" width="120" height="30" rx="5" fill="#1e3a5f" stroke="#4fc3f7" stroke-width="1"/>
  <text x="400" y="275" text-anchor="middle" fill="#4fc3f7" font-size="11" font-weight="bold">ç­¾åæ•°æ®ä¼ é€’</text>

  <!-- ç®­å¤´2: ä¸­ç»§è€… -> åˆçº¦ (è°ƒç”¨permit) -->
  <path d="M 700 290 Q 800 290 900 290" fill="none" stroke="#ffb74d" stroke-width="3" marker-end="url(#arrowOrange)" filter="url(#glow)"/>
  <rect x="740" y="255" width="120" height="30" rx="5" fill="#3d2e1f" stroke="#ffb74d" stroke-width="1"/>
  <text x="800" y="275" text-anchor="middle" fill="#ffb74d" font-size="11" font-weight="bold">é“¾ä¸Šäº¤æ˜“è°ƒç”¨</text>

  <!-- ==================== åº•éƒ¨è¯¦ç»†æ•°æ®æµ ==================== -->
  
  <g transform="translate(50, 480)">
    <rect x="0" y="0" width="1100" height="280" rx="15" fill="#1a1a2e" stroke="#ba68c8" stroke-width="2"/>
    <text x="550" y="30" text-anchor="middle" fill="#ba68c8" font-size="16" font-weight="bold">ğŸ“Š è¯¦ç»†æ•°æ®æµè½¬</text>
    
    <!-- ç­¾åæ¶ˆæ¯æ„é€  -->
    <g transform="translate(30, 50)">
      <rect x="0" y="0" width="320" height="200" rx="10" fill="#2d2d44" stroke="#4fc3f7" stroke-width="1"/>
      <text x="160" y="25" text-anchor="middle" fill="#4fc3f7" font-size="13" font-weight="bold">EIP-712 ç­¾åæ¶ˆæ¯ç»“æ„</text>
      
      <text x="15" y="50" fill="#ff8a65" font-size="11" font-weight="bold">\x19\x01</text>
      <text x="80" y="50" fill="#888888" font-size="10">â† EIP-712 å‰ç¼€</text>
      
      <rect x="15" y="60" width="290" height="55" rx="5" fill="#1e3a5f"/>
      <text x="25" y="78" fill="#4fc3f7" font-size="10" font-weight="bold">DOMAIN_SEPARATOR:</text>
      <text x="35" y="93" fill="#e0e0e0" font-size="9">name: "Uniswap V2"</text>
      <text x="35" y="106" fill="#e0e0e0" font-size="9">chainId: 1 | verifyingContract: 0x...</text>
      
      <rect x="15" y="120" width="290" height="70" rx="5" fill="#1e3a5f"/>
      <text x="25" y="138" fill="#81c784" font-size="10" font-weight="bold">structHash (PERMIT_TYPEHASH + æ•°æ®):</text>
      <text x="35" y="153" fill="#e0e0e0" font-size="9">owner: 0xAlice... | spender: 0xRouter...</text>
      <text x="35" y="166" fill="#e0e0e0" font-size="9">value: 1000 | nonce: 0 | deadline: 1702...</text>
      <text x="35" y="181" fill="#ffb74d" font-size="9">â†’ keccak256 â†’ digest (32 bytes)</text>
    </g>

    <!-- ç­¾åè¿‡ç¨‹ -->
    <g transform="translate(380, 50)">
      <rect x="0" y="0" width="200" height="200" rx="10" fill="#2d2d44" stroke="#ffb74d" stroke-width="1"/>
      <text x="100" y="25" text-anchor="middle" fill="#ffb74d" font-size="13" font-weight="bold">ç­¾åç”Ÿæˆ</text>
      
      <text x="100" y="55" text-anchor="middle" fill="#e0e0e0" font-size="11">digest (32 bytes)</text>
      <text x="100" y="75" text-anchor="middle" fill="#888888" font-size="20">â†“</text>
      <text x="100" y="100" text-anchor="middle" fill="#ff8a65" font-size="11">ğŸ” ECDSA ç­¾å</text>
      <text x="100" y="115" text-anchor="middle" fill="#888888" font-size="9">(ä½¿ç”¨ Alice ç§é’¥)</text>
      <text x="100" y="135" text-anchor="middle" fill="#888888" font-size="20">â†“</text>
      
      <rect x="20" y="145" width="160" height="45" rx="5" fill="#3d2e1f"/>
      <text x="100" y="165" text-anchor="middle" fill="#81c784" font-size="11" font-weight="bold">ç­¾åç»“æœ:</text>
      <text x="100" y="182" text-anchor="middle" fill="#e0e0e0" font-size="10">v (1B) | r (32B) | s (32B)</text>
    </g>

    <!-- é“¾ä¸ŠéªŒè¯ -->
    <g transform="translate(610, 50)">
      <rect x="0" y="0" width="240" height="200" rx="10" fill="#2d2d44" stroke="#81c784" stroke-width="1"/>
      <text x="120" y="25" text-anchor="middle" fill="#81c784" font-size="13" font-weight="bold">é“¾ä¸ŠéªŒè¯ (permitå‡½æ•°)</text>
      
      <text x="15" y="50" fill="#ff8a65" font-size="10">1. require(deadline >= block.timestamp)</text>
      
      <text x="15" y="75" fill="#4fc3f7" font-size="10">2. é‡å»º digest:</text>
      <text x="25" y="90" fill="#e0e0e0" font-size="9">keccak256(\x19\x01 + DOMAIN_SEP + hash)</text>
      
      <text x="15" y="115" fill="#ffb74d" font-size="10">3. ecrecover(digest, v, r, s)</text>
      <text x="25" y="130" fill="#e0e0e0" font-size="9">â†’ recoveredAddress</text>
      
      <text x="15" y="155" fill="#81c784" font-size="10">4. éªŒè¯:</text>
      <text x="25" y="170" fill="#e0e0e0" font-size="9">recoveredAddress != 0x0</text>
      <text x="25" y="185" fill="#e0e0e0" font-size="9">recoveredAddress == owner âœ“</text>
    </g>

    <!-- æœ€ç»ˆç»“æœ -->
    <g transform="translate(880, 50)">
      <rect x="0" y="0" width="180" height="200" rx="10" fill="#2d2d44" stroke="#ba68c8" stroke-width="1"/>
      <text x="90" y="25" text-anchor="middle" fill="#ba68c8" font-size="13" font-weight="bold">æ‰§è¡Œç»“æœ</text>
      
      <rect x="15" y="40" width="150" height="70" rx="5" fill="#3d2844"/>
      <text x="90" y="60" text-anchor="middle" fill="#81c784" font-size="11">âœ… æˆæƒæˆåŠŸ</text>
      <text x="90" y="80" text-anchor="middle" fill="#e0e0e0" font-size="9">allowance[owner][spender]</text>
      <text x="90" y="95" text-anchor="middle" fill="#e0e0e0" font-size="9">= value</text>
      
      <rect x="15" y="120" width="150" height="70" rx="5" fill="#3d2844"/>
      <text x="90" y="140" text-anchor="middle" fill="#ffb74d" font-size="11">ğŸ”’ é˜²é‡æ”¾</text>
      <text x="90" y="160" text-anchor="middle" fill="#e0e0e0" font-size="9">nonces[owner]++</text>
      <text x="90" y="175" text-anchor="middle" fill="#888888" font-size="9">åŒä¸€ç­¾åæ— æ³•å†ç”¨</text>
    </g>

    <!-- è¿æ¥ç®­å¤´ -->
    <path d="M 350 150 L 380 150" fill="none" stroke="#4fc3f7" stroke-width="2" marker-end="url(#arrowBlue)"/>
    <path d="M 580 150 L 610 150" fill="none" stroke="#ffb74d" stroke-width="2" marker-end="url(#arrowOrange)"/>
    <path d="M 850 150 L 880 150" fill="none" stroke="#81c784" stroke-width="2" marker-end="url(#arrowGreen)"/>
  </g>

  <!-- åº•éƒ¨è¯´æ˜ -->
  <g transform="translate(50, 770)">
    <text x="0" y="0" fill="#4fc3f7" font-size="11">â— ç”¨æˆ·æ“ä½œ (ç¦»çº¿)</text>
    <text x="180" y="0" fill="#ffb74d" font-size="11">â— ä¸­ç»§è€…æ“ä½œ (æ”¯ä»˜Gas)</text>
    <text x="400" y="0" fill="#81c784" font-size="11">â— åˆçº¦éªŒè¯ (é“¾ä¸Š)</text>
    <text x="580" y="0" fill="#ba68c8" font-size="11">â— æœ€ç»ˆçŠ¶æ€å˜æ›´</text>
    <text x="780" y="0" fill="#888888" font-size="11">æ ¸å¿ƒä¼˜åŠ¿: ç”¨æˆ·æ— éœ€ ETHï¼Œä¸€æ¬¡ç­¾åå®Œæˆæˆæƒ</text>
  </g>
</svg>
